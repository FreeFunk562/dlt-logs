"use strict";(self.webpackChunkdlt_logs=self.webpackChunkdlt_logs||[]).push([[126],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),s=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(u.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=s(n),m=a,f=p["".concat(u,".").concat(m)]||p[m]||d[m]||i;return n?r.createElement(f,o(o({ref:t},c),{},{components:n})):r.createElement(f,o({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=p;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},5162:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(7294),a=n(4334),i="tabItem_Ymn6";function o(e){var t=e.children,n=e.hidden,o=e.className;return r.createElement("div",{role:"tabpanel",className:(0,a.Z)(i,o),hidden:n},t)}},5488:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(3117),a=n(7294),i=n(4334),o=n(2389),l=n(7392),u=n(7094),s=n(2466),c="tabList__CuJ",d="tabItem_LNqP";function p(e){var t,n,o=e.lazy,p=e.block,m=e.defaultValue,f=e.values,g=e.groupId,h=e.className,v=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),b=null!=f?f:v.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),w=(0,l.l)(b,(function(e,t){return e.value===t.value}));if(w.length>0)throw new Error('Docusaurus error: Duplicate values "'+w.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var y=null===m?m:null!=(t=null!=m?m:null==(n=v.find((function(e){return e.props.default})))?void 0:n.props.value)?t:v[0].props.value;if(null!==y&&!b.some((function(e){return e.value===y})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+b.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var k=(0,u.U)(),O=k.tabGroupChoices,T=k.setTabGroupChoices,x=(0,a.useState)(y),P=x[0],S=x[1],N=[],E=(0,s.o5)().blockElementScrollPositionUntilNextRender;if(null!=g){var C=O[g];null!=C&&C!==P&&b.some((function(e){return e.value===C}))&&S(C)}var D=function(e){var t=e.currentTarget,n=N.indexOf(t),r=b[n].value;r!==P&&(E(t),S(r),null!=g&&T(g,String(r)))},L=function(e){var t,n=null;switch(e.key){case"ArrowRight":var r,a=N.indexOf(e.currentTarget)+1;n=null!=(r=N[a])?r:N[0];break;case"ArrowLeft":var i,o=N.indexOf(e.currentTarget)-1;n=null!=(i=N[o])?i:N[N.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:(0,i.Z)("tabs-container",c)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":p},h)},b.map((function(e){var t=e.value,n=e.label,o=e.attributes;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:P===t?0:-1,"aria-selected":P===t,key:t,ref:function(e){return N.push(e)},onKeyDown:L,onFocus:D,onClick:D},o,{className:(0,i.Z)("tabs__item",d,null==o?void 0:o.className,{"tabs__item--active":P===t})}),null!=n?n:t)}))),o?(0,a.cloneElement)(v.filter((function(e){return e.props.value===P}))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},v.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==P})}))))}function m(e){var t=(0,o.Z)();return a.createElement(p,(0,r.Z)({key:String(t)},e))}},9211:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return c},default:function(){return g},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return m}});var r=n(3117),a=n(102),i=(n(7294),n(3905)),o=n(5488),l=n(5162),u=["components"],s={id:"rewritePlugin",title:"rewrite plugin",sidebar_label:"Plugin Rewrite"},c=void 0,d={unversionedId:"rewritePlugin",id:"rewritePlugin",title:"rewrite plugin",description:'DLT-Logs extension version >= 1.19.0 come with a plugin that supports "rewriting"/modification of messages.',source:"@site/docs/rewritePlugin.md",sourceDirName:".",slug:"/rewritePlugin",permalink:"/dlt-logs/docs/rewritePlugin",draft:!1,editUrl:"https://github.com/mbehr1/dlt-logs/edit/master/docs/dlt-logs/docs/rewritePlugin.md",tags:[],version:"current",frontMatter:{id:"rewritePlugin",title:"rewrite plugin",sidebar_label:"Plugin Rewrite"},sidebar:"dltLogsSideBar",previous:{title:"Plugin Non-verbose mode",permalink:"/dlt-logs/docs/nonVerbosePlugin"}},p={},m=[{value:"Example",id:"example",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Treeview",id:"treeview",level:2},{value:"Limitations",id:"limitations",level:2}],f={toc:m};function g(e){var t=e.components,n=(0,a.Z)(e,u);return(0,i.kt)("wrapper",(0,r.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,'DLT-Logs extension version >= 1.19.0 come with a plugin that supports "rewriting"/modification of messages.'),(0,i.kt)("h2",{id:"example"},"Example"),(0,i.kt)("p",null,"The example configuration below shows one intended use-case:\nOften e.g. SysLog based messages are piped into DLT. But as typically there are additional latencies the timestamp from the DLT message is the timestamp where the process piping the data into DLT was executed and not from when the original message was created.\nE.g."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"...\n14043 5:43:24 PM 64859 ECU1 SYS  JOUR info 2020/03/24 17:18:19.118891 0.000000 kernel: Informational: Booting Linux on physical CPU 0x0\n...\n14188 5:43:24 PM 64897 ECU1 SYS  JOUR info 2020/03/24 17:18:19.121146 0.002251 kernel: Informational: Console: colour dummy device 80x25\n...\n")),(0,i.kt)("p",null,"using the config below this can be changed to:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"...\n14043 5:43:24 PM     0 ECU1 SYS  JOUR info kernel: Informational: Booting Linux on physical CPU 0x0\n...\n14188 5:43:24 PM    23 ECU1 SYS  JOUR info kernel: Informational: Console: colour dummy device 80x25\n...\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"See here that the timestamp is now correctly set to 0 and 2.3ms as taken from the syslog time and not at 6.4s which is the time when the dlt-syslog-pipe process dumped it into DLT.\nThis makes the ",(0,i.kt)("a",{parentName:"p",href:"toggleSortOrder"},"toggle sort order"),"! feature where DLT logs get sorted by timestamp really useful!")),(0,i.kt)("h2",{id:"configuration"},"Configuration"),(0,i.kt)("p",null,"You have to configure the 'rewrite' plugin. To configure the plugin call"),(0,i.kt)(o.Z,{groupId:"operating-systems",defaultValue:"win",values:[{label:"Windows",value:"win"},{label:"macOS",value:"mac"},{label:"Linux",value:"linux"}],mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"win",mdxType:"TabItem"},'Use F1 or Ctrl+Shift+P and enter/select command "Preferences: Open Settings (JSON)".'),(0,i.kt)(l.Z,{value:"mac",mdxType:"TabItem"},'Use \u21e7\u2318P and enter/select command "Preferences: Open Settings (JSON)".'),(0,i.kt)(l.Z,{value:"linux",mdxType:"TabItem"},'Use Ctrl+Shift+P and enter/select command "Preferences: Open Settings (JSON)".')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsonc"},'"dlt-logs.plugins": [\n        ...\n        {\n            "name":"NonVerbose",\n            ...\n        },{\n            "name": "Rewrite", // config for \'rewrite\' plugin\n            "enabled":true, // default to true, set to `false`to disable\n            "rewrites":[ // array with rewrite-configs\n                {\n                    "name":"SYS/JOUR timestamp", // name of the rewrite-config\n                    "filter":{ // filter settings applied. Same as filter config.\n                        "apid":"SYS",\n                        "ctid":"JOUR"\n                    },\n                    "payloadRegex":"^.*? .*? (?<timeStamp>\\\\d+\\\\.\\\\d+) (?<text>.*)$", // optional, for the payload a regex can be defined to avoid recalculating this for each rewrite function below. This will be evaluated after the message was matched towards the filter already!\n                    "rewrite":{ // rewrite functions. `key`is the field to change for the msg. Currently only `timeStamp` and `payloadText` are supported. Each value is a javascript function that will be called with 2 parameters: the match from payloadRegex (if defined) and the message itself that matched. If the function returns a value !== undefined the attribute will be set to that value.\n                        "timeStamp":"function(m,msg){ if (!m) {return undefined; } return Math.round(Number(m.groups?.[\'timeStamp\']) * 10000)}",\n                        "payloadText":"function(m,msg){ if (!m) {return undefined; } return m.groups?.[\'text\']}"\n                    }\n                }\n            ]\n        },\n    ],\n')),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"If you changed the config you do need to open a new file or use ",(0,i.kt)("inlineCode",{parentName:"p"},"Developer: Reload window")," to reload the window incl. the extension host.")),(0,i.kt)("h2",{id:"treeview"},"Treeview"),(0,i.kt)("p",null,"In the tree-view you'll find more information about the loaded service and methods under"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Plugins\n|- 'Rewrite' plugin\n   |- Rewrites (<number of rewrite configs loadedloaded>)\n      | - <list of all loaded rewrite configs with name>\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"The tooltip of each rewrite config contains more info e.g. the filter settings and which fields will be rewritten/modified.")),(0,i.kt)("p",null,"(todo add picture)"),(0,i.kt)("h2",{id:"limitations"},"Limitations"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The plugin is not applied on exporting DLT logs. Only on viewing."),(0,i.kt)("li",{parentName:"ul"},"tbd... (be careful with what you change...)")))}g.isMDXComponent=!0}}]);